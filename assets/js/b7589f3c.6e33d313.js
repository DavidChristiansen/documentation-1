"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[543],{5596:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return d},toc:function(){return p},default:function(){return u}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=n(2004),s=["components"],l={id:"org-setup",sidebar_position:1},c="Setup your organization",d={unversionedId:"enterprise-scale/landingzones/platform/org-setup",id:"enterprise-scale/landingzones/platform/org-setup",title:"Setup your organization",description:"Organize your private repository",source:"@site/docs/enterprise-scale/landingzones/platform/org-setup.mdx",sourceDirName:"enterprise-scale/landingzones/platform",slug:"/enterprise-scale/landingzones/platform/org-setup",permalink:"/docs/enterprise-scale/landingzones/platform/org-setup",editUrl:"https://github.com/aztfmod/documentation/tree/main/website/docs/enterprise-scale/landingzones/platform/org-setup.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"org-setup",sidebar_position:1}},p=[{value:"Organize your private repository",id:"organize-your-private-repository",children:[{value:"Clone the repository",id:"clone-the-repository",children:[],level:3},{value:"Visual Studio code",id:"visual-studio-code",children:[],level:3},{value:"Add remote development extension",id:"add-remote-development-extension",children:[],level:3},{value:"Re-open vscode in the dev container",id:"re-open-vscode-in-the-dev-container",children:[],level:3},{value:"Rename the default branch to main",id:"rename-the-default-branch-to-main",children:[],level:3},{value:"Clone the CAF Terraform landingzones code",id:"clone-the-caf-terraform-landingzones-code",children:[],level:3},{value:"Switch the landingzone branch",id:"switch-the-landingzone-branch",children:[],level:3}],level:2},{value:"Setup the orgs folder",id:"setup-the-orgs-folder",children:[{value:"Copy the Contoso template configuration",id:"copy-the-contoso-template-configuration",children:[],level:3},{value:"Customize the templates",id:"customize-the-templates",children:[],level:3}],level:2}],m={toc:p};function u(e){var t=e.components,l=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,o.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"setup-your-organization"},"Setup your organization"),(0,r.kt)("h2",{id:"organize-your-private-repository"},"Organize your private repository"),(0,r.kt)("p",null,"The first step is create a private repository in your current organization. It has to be a git repository."),(0,r.kt)("p",null,"The video bellow shows you how to setup a private Gihub repository you are going to use to store the configuration of yout platform landingzones."),(0,r.kt)(i.Z,{playing:!0,controls:!0,url:"https://youtu.be/1tbXXOM1s-o",mdxType:"ReactPlayer"}),(0,r.kt)("h3",{id:"clone-the-repository"},"Clone the repository"),(0,r.kt)("p",null,"Clone the private repository on your local machine"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Adjust the name of your organization\ngithub.com % git clone git://github.com/<org>/contoso contoso && cd contoso\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Cloning into 'contoso'...\nremote: Enumerating objects: 429, done.\nremote: Counting objects: 100% (429/429), done.\nremote: Compressing objects: 100% (320/320), done.\nremote: Total 429 (delta 110), reused 307 (delta 77), pack-reused 0\nReceiving objects: 100% (429/429), 2.93 MiB | 1.52 MiB/s, done.\nResolving deltas: 100% (110/110), done.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Open visual studio code from the contoso folder\ncontoso % code .\n")),(0,r.kt)("p",null,"Trust the repository"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8526).Z})," "),(0,r.kt)("h3",{id:"visual-studio-code"},"Visual Studio code"),(0,r.kt)("p",null,"Visual Studio code should open your cloned repository and display the following structure."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(5273).Z})),(0,r.kt)("h3",{id:"add-remote-development-extension"},"Add remote development extension"),(0,r.kt)("p",null,"Select the ",(0,r.kt)("strong",{parentName:"p"},"Remote - Containers")," extension and click Install."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(662).Z})),(0,r.kt)("h3",{id:"re-open-vscode-in-the-dev-container"},"Re-open vscode in the dev container"),(0,r.kt)("p",null,"Click on the green bottom left button\nFrom the menu select the option"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(3936).Z})),(0,r.kt)("p",null,"Open a zsh terminal to get a better understanding of the folders and branch you are using."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(9247).Z})),(0,r.kt)("p",null,"You should now see the following terminal. This terminal is where you will run all terminal commands described in this on-boarding tutorial."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(9485).Z})),(0,r.kt)("h3",{id:"rename-the-default-branch-to-main"},"Rename the default branch to main"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\u279c  caf git:(starter) git checkout main                  \nSwitched to branch 'main'\n\u279c  caf git:(main)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\u279c  caf git:(main) git push --set-upstream origin main\n\nEnumerating objects: 103, done.\nCounting objects: 100% (103/103), done.\nDelta compression using up to 2 threads\nCompressing objects: 100% (89/89), done.\nWriting objects: 100% (98/98), 53.35 KiB | 420.00 KiB/s, done.\nTotal 98 (delta 24), reused 0 (delta 0), pack-reused 0\nremote: Resolving deltas: 100% (24/24), completed with 3 local objects.\nremote: \nremote: Create a pull request for 'main' on GitHub by visiting:\nremote:      https://github.com/<org>/contoso/pull/new/main\nremote: \nTo github.com:<org>/contoso.git\n * [new branch]      main -> main\nBranch 'main' set up to track remote branch 'main' from 'origin'.\n\n\u279c  caf git:(main) \n\n")),(0,r.kt)("h3",{id:"clone-the-caf-terraform-landingzones-code"},"Clone the CAF Terraform landingzones code"),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The CAF Terraform landingzones framework assumes the landingzones Terraform code is cloned in a repository called landingzones."))),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Do not use another name as ",(0,r.kt)("strong",{parentName:"p"},"landingzones")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\u279c  caf git:(starter) \u2717 git clone https://github.com/Azure/caf-terraform-landingzones.git landingzones\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Cloning into 'landingzones'...\nremote: Enumerating objects: 9067, done.\nremote: Counting objects: 100% (393/393), done.\nremote: Compressing objects: 100% (281/281), done.\nremote: Total 9067 (delta 161), reused 295 (delta 108), pack-reused 8674\nReceiving objects: 100% (9067/9067), 11.65 MiB | 6.83 MiB/s, done.\nResolving deltas: 100% (5792/5792), done.\nUpdating files: 100% (406/406), done.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Go to the landingzones folder\n\u279c  caf git:(starter) \u2717 cd landingzones \n\n# Note all folders are starting with /tf/caf in the devcontainers. \n\u279c  landingzones git:(master) \u2717 pwd\n/tf/caf/landingzones\n\u279c  landingzones git:(master) \u2717 \n")),(0,r.kt)("h3",{id:"switch-the-landingzone-branch"},"Switch the landingzone branch"),(0,r.kt)("p",null,"The CAF Terraform landingzones are released on regular basis. In order to align the deployment instructions, you need to make sure the Terraform code is also using the correct branch or tag."),(0,r.kt)("p",null,"From the terminal execute"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\u279c  landingzones git:(master) git checkout 2112.int\nBranch '2112.int' set up to track remote branch '2112.int' from 'origin'.\nSwitched to a new branch '2112.int'\n\u279c  landingzones git:(2112.int) \u2717 \n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The branch name in parentheses has changed from ",(0,r.kt)("strong",{parentName:"p"},"master")," to ",(0,r.kt)("strong",{parentName:"p"},"2112.int")))),(0,r.kt)("h2",{id:"setup-the-orgs-folder"},"Setup the orgs folder"),(0,r.kt)("p",null,"The framework uses a folder called ",(0,r.kt)("strong",{parentName:"p"},"orgs")," stored in the devcontainer at the folder ",(0,r.kt)("strong",{parentName:"p"},"/tf/caf/orgs"),"."),(0,r.kt)("p",null,"The orgs folder must be created at the root of your private repository. It can host different configuration of your platform landingzones.\nFor example, you can setup an engineering and production to represent two master configuration where you can first test the configuration and setting in the engineering platform landingzones and then when validated, move that configuration into the production. This is an approach using a mono-repo but some customers would prefer to have different config git repo to separete engineering from production. More documentation on this topics will come soon. "),(0,r.kt)("h3",{id:"copy-the-contoso-template-configuration"},"Copy the Contoso template configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p /tf/caf/orgs/contoso          \n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cp -R /tf/caf/landingzones/templates/enterprise-scale/contoso/platform \\\n      /tf/caf/orgs/contoso/platform\n")),(0,r.kt)("p",null,"You can now see the following folder structure created in you local repository."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8262).Z})),(0,r.kt)("p",null,"You can explore the content of this folder and get more details on the files and folders."),(0,r.kt)("h3",{id:"customize-the-templates"},"Customize the templates"),(0,r.kt)("p",null,"To customize the templates and getting starting quick, you can use teh find in folders feature"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(1031).Z})),(0,r.kt)("p",null,"Search for the term ",(0,r.kt)("strong",{parentName:"p"},"<replace",">")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(6684).Z})),(0,r.kt)("p",null,"You can now select each items and adjust the values accordingly."),(0,r.kt)("p",null,"Go to the next page to learn how to customize the default template."))}u.isMDXComponent=!0},662:function(e,t,n){t.Z=n.p+"assets/images/extension-remote-containers-fa1c318418560105bf5ac7b392e9abfc.png"},1031:function(e,t,n){t.Z=n.p+"assets/images/find-replace-395792418647a647e8617aaf26b4cd5c.png"},6684:function(e,t,n){t.Z=n.p+"assets/images/replace-19f2d94b09b3a602aae76f35da92c4d6.png"},9247:function(e,t,n){t.Z=n.p+"assets/images/vscode-open-zsh-5e73513bdfab5e55636bf00fa722bc98.png"},8262:function(e,t,n){t.Z=n.p+"assets/images/vscode-orgs-template-folder-structure-edf28d2e3612ebe5b536353e7c01a66e.png"},3936:function(e,t,n){t.Z=n.p+"assets/images/vscode-reopen-container-a51644795f3d80f6b660563399d5e9c5.png"},8526:function(e,t,n){t.Z=n.p+"assets/images/vscode-trust-folder-8bc17d33e3daaf22ddae46059770d0f1.png"},9485:function(e,t,n){t.Z=n.p+"assets/images/vscode-zsh-3f5b582169dfb9652ba1e30eec848e70.png"},5273:function(e,t,n){t.Z=n.p+"assets/images/vscode-f682b3e0edb145f921707a828dedd723.png"}}]);