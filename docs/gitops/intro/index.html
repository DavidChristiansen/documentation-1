<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/documentation/blog/rss.xml" title="Cloud Adoption Framework for Terraform Landing zones RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documentation/blog/atom.xml" title="Cloud Adoption Framework for Terraform Landing zones Atom Feed"><title data-react-helmet="true">intro | Cloud Adoption Framework for Terraform Landing zones</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://aztfmod.github.io/documentation/docs/gitops/intro"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="robots" content="noindex"><meta data-react-helmet="true" property="og:title" content="intro | Cloud Adoption Framework for Terraform Landing zones"><meta data-react-helmet="true" name="description" content="GitOps for Azure landing zones"><meta data-react-helmet="true" property="og:description" content="GitOps for Azure landing zones"><link data-react-helmet="true" rel="icon" href="/documentation/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://aztfmod.github.io/documentation/docs/gitops/intro"><link data-react-helmet="true" rel="alternate" href="https://aztfmod.github.io/documentation/docs/gitops/intro" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://aztfmod.github.io/documentation/docs/gitops/intro" hreflang="x-default"><link rel="stylesheet" href="/documentation/assets/css/styles.6c1fd8a0.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.a965df27.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.61be711d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><div class="navbar__logo"><img src="/documentation/img/logo_landingzone.png" alt="Cloud Adoption Framework for Terraform Landing zones." class="themedImage_TMUO themedImage--light_4Vu1"><img src="/documentation/img/logo_landingzone.png" alt="Cloud Adoption Framework for Terraform Landing zones." class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Cloud Adoption Framework</b></a><a class="navbar__item navbar__link" href="/documentation/docs/intro">Introduction</a><a class="navbar__item navbar__link" href="/documentation/docs/rover/rover-intro">rover</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aztfmod/documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>intro</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="gitops-for-azure-landing-zones">GitOps for Azure landing zones<a class="hash-link" href="#gitops-for-azure-landing-zones" title="Direct link to heading">â€‹</a></h2><p>Changes in the different environments introduced and promoted following GitOps concepts, principles and mechanisms:</p><ul><li>Configuration changes are described in a declarative language (here using Terraform).</li><li>Operations are promoted from one environment to another via Git operations (Git commit, push, pull request).</li><li>Changes are promoted only once they have reached quality gates (provided by automation, CI mechanisms and test suites executions) to promote higher quality changes.</li><li>Changes are promoted only once they also have been validated by service owners in the environment (that can be declared in the DevOps configuration of the platform).</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="code-and-configuration-repositories">Code and configuration repositories<a class="hash-link" href="#code-and-configuration-repositories" title="Direct link to heading">â€‹</a></h2><p>GitOps leverages Git as a single source of truth for declarative infrastructure and applications. Having a common code structure and naming convention is critical to maintain code quality and enhance the developer experience (especially for new team members).</p><p>When we deal with Infra as Code and landing zone deployments, we must also make sure that the structure of our repository will support the workflow of the different teams involved and enforce the segregation of concerns with the multiple environments. <em>Should the code / variables be organized by environments or by teams involved in the deployment
process</em>? Is a legitimate question. Code structure and organization is always a hot topic, and while one size fits all is rarely the norm, we tend to recommend starting with either of the following extending&#x27;s on Terraform (unclear) documentation.</p><p>For a given environment, ideally the code should remain identical and only the variables should evolve. The following example illustrates the two repository we recommend: one for the configuration and one for the code of deployment.</p><p>Looking closer at the configuration repository, we can see that each environment is represented in a folder and each environment enforces the following structure:</p><table><thead><tr><th><strong>directory name</strong></th><th><strong>purpose and content</strong></th></tr></thead><tbody><tr><td>devops</td><td>Contains the DevOps environment variables to configure the Azure DevOps variable groups, and pipeline definitions</td></tr><tr><td>landingzones</td><td>Contains a directory for each landing zone. Each directory will include its own pipeline definition for apply, destroy, etc.   Each directory must also contain the landing zones variable definitions files.</td></tr><tr><td>launchpad</td><td>Contains the configuration files for the launchpad environment.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="empowering-the-developers">Empowering the developers<a class="hash-link" href="#empowering-the-developers" title="Direct link to heading">â€‹</a></h3><p>It is often more productive to have developers equipped with their own subscriptions in order to accelerate the engineering time. Those subscriptions can be part of <a href="https://azure.microsoft.com/pricing/dev-test/" target="_blank" rel="noopener noreferrer">Azure Dev/Test</a>, can be part of <a href="https://azure.microsoft.com/pricing/member-offers/credit-for-visual-studio-subscribers/" target="_blank" rel="noopener noreferrer">Visual Studio Subscription</a>, or can be sourced via the usual enterprise or partners.</p><p>We very often observe that a dedicated engineering sandpit which includes autonomous identity tenant (Azure Active Directory tenant), although it might appear more difficult to maintain, but will enable faster composition and innovation, especially to iterate on the reduction of privilege engineering as it will save round-trips with corporate identity teams. This will enable a frictionless collaboration and better collaboration when the new service is going through security validation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aztfmod/documentation/tree/main/website/docs/gitops/intro.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gitops-for-azure-landing-zones" class="table-of-contents__link toc-highlight">GitOps for Azure landing zones</a></li><li><a href="#code-and-configuration-repositories" class="table-of-contents__link toc-highlight">Code and configuration repositories</a><ul><li><a href="#empowering-the-developers" class="table-of-contents__link toc-highlight">Empowering the developers</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/aztfmod/community" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/azure/caf-terraform-landingzones" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Cloud Adoption Framework for Terraform Landing zones.</div></div></div></footer></div>
<script src="/documentation/assets/js/runtime~main.a965df27.js"></script>
<script src="/documentation/assets/js/main.61be711d.js"></script>
</body>
</html>